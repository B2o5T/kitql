---
title: KitQL - Queries
sidebar_label: Queries
---

# Queries

## Two ways

### In a component

```svelte
<script lang="ts">
	import { browser } from '$app/env';
	import { KQL_AllContinents } from '$lib/graphql/_kitql/graphqlStores';

	$: browser && KQL_AllContinents.query();
</script>

<!-- Just use the store here, or anywhere else! -->
{JSON.stringify($KQL_AllContinents.data, null, 2)}
```

### In context module

If you do this in the route, you will have the data in `SSR` mode out of the box!

```svelte
<script context="module" lang="ts">
	import { KQL_AllContinents } from '$lib/graphql/_kitql/graphqlStores';

	export async function load({ fetch }) {
		await KQL_AllContinents.queryLoad({ fetch });
		return {};
	}
</script>

<!-- Just use the store here, or anywhere else! -->
{JSON.stringify($KQL_AllContinents.data, null, 2)}
```

_Note that in the context module, we use `.queryLoad()` instead of `.query()`. This enables a better user experience in client side navigation because it will not wait for the result to switch page._

It will handle for you SSR and client side navigation out of the box using standard `load` functions.

<Graph>

flowchart TB
b3-->a2
subgraph Page Home
a0[New visitor]-->a1[load server]-->a2[load browser]-->a3[Enjoy the home page]
style a0 fill:#29B56A,color:#000
style a3 fill:#254CA0,color:#000
end
subgraph Page About
b0[New visitor]-->b1[load server]-->b2[load browser]-->b3[Enjoy the about page]
style b0 fill:#29B56A,color:#000
style b3 fill:#254CA0,color:#000
end

</Graph>

## Options

### Policies

- `cache-first` _(default)_: Will go first into the cache and if it's empty or outdated it will go to the network.
- `cache-and-network`: Will grab from the cache AND will do a network call in the background.
- `network-only`: Will only go to the network.
- `cache-only`: Will only go to the cache. (offline scenarios)

To be used like ðŸ‘‡

```ts
await KQL_AllContinents.query({ settings: { policy: 'cache-and-network' } });
```

### Reset Cache

You can do it query by query like ðŸ‘‡

```ts
KQL_AllContinents.resetCache();
```

Or everything in one cmd ðŸ‘‡

```ts
KQL__ResetAllCaches;
```
